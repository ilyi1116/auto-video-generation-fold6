# =============================================================================
# 🔒 生產環境變數配置範本
# =============================================================================
# 
# 注意：此文件僅為範本，請勿包含實際生產密鑰
# 實際部署時，請通過環境變數或密鑰管理服務設置這些值
#
# 生成日期: 2025-08-02
# 最後更新: Claude Code Assistant
# =============================================================================

# =============================================================================
# 🔐 JWT & 認證配置
# =============================================================================
JWT_SECRET_KEY=${JWT_SECRET_KEY}
JWT_PUBLIC_KEY=${JWT_PUBLIC_KEY}
JWT_ALGORITHM=RS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# 🗄️ 資料庫配置
# =============================================================================
# PostgreSQL 主資料庫
POSTGRES_HOST=${POSTGRES_HOST:-localhost}
POSTGRES_PORT=${POSTGRES_PORT:-5432}
POSTGRES_DB=${POSTGRES_DB:-autovideo_prod}
POSTGRES_USER=${POSTGRES_USER:-autovideo}
POSTGRES_PASSWORD=${POSTGRES_PASSWORD}

# 資料庫連接池設置
DATABASE_POOL_SIZE=${DATABASE_POOL_SIZE:-20}
DATABASE_MAX_OVERFLOW=${DATABASE_MAX_OVERFLOW:-30}
DATABASE_POOL_TIMEOUT=${DATABASE_POOL_TIMEOUT:-30}

# Redis 快取
REDIS_HOST=${REDIS_HOST:-localhost}
REDIS_PORT=${REDIS_PORT:-6379}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=${REDIS_DB:-0}

# =============================================================================
# 🌐 CORS & 安全配置  
# =============================================================================
CORS_ORIGINS=${CORS_ORIGINS:-["https://app.autovideo.com","https://admin.autovideo.com"]}
ALLOWED_HOSTS=${ALLOWED_HOSTS:-["app.autovideo.com","admin.autovideo.com","api.autovideo.com"]}
TRUSTED_HOSTS=${TRUSTED_HOSTS:-["app.autovideo.com"]}

# 安全標頭
SECURE_SSL_REDIRECT=${SECURE_SSL_REDIRECT:-true}
SECURE_HSTS_SECONDS=${SECURE_HSTS_SECONDS:-31536000}
SECURE_CONTENT_TYPE_NOSNIFF=${SECURE_CONTENT_TYPE_NOSNIFF:-true}
SECURE_BROWSER_XSS_FILTER=${SECURE_BROWSER_XSS_FILTER:-true}

# =============================================================================
# 🤖 AI 服務 API 密鑰
# =============================================================================
# OpenAI
OPENAI_API_KEY=${OPENAI_API_KEY}
OPENAI_ORG_ID=${OPENAI_ORG_ID}

# Google Gemini
GEMINI_API_KEY=${GEMINI_API_KEY}
GEMINI_PROJECT_ID=${GEMINI_PROJECT_ID}

# Suno AI
SUNO_API_KEY=${SUNO_API_KEY}
SUNO_ORG_ID=${SUNO_ORG_ID}

# Stable Diffusion
STABLE_DIFFUSION_API_KEY=${STABLE_DIFFUSION_API_KEY}
STABLE_DIFFUSION_ORG_ID=${STABLE_DIFFUSION_ORG_ID}

# Anthropic Claude
ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}

# =============================================================================
# ☁️ 雲端存儲配置
# =============================================================================
# AWS S3
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_REGION=${AWS_REGION:-us-west-2}
AWS_S3_BUCKET=${AWS_S3_BUCKET:-autovideo-prod-storage}

# CloudFlare R2 (替代方案)
CLOUDFLARE_R2_ACCESS_KEY=${CLOUDFLARE_R2_ACCESS_KEY}
CLOUDFLARE_R2_SECRET_KEY=${CLOUDFLARE_R2_SECRET_KEY}
CLOUDFLARE_R2_ENDPOINT=${CLOUDFLARE_R2_ENDPOINT}
CLOUDFLARE_R2_BUCKET=${CLOUDFLARE_R2_BUCKET}

# =============================================================================
# 📧 通知服務
# =============================================================================
# SMTP 郵件服務
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT:-587}
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_FROM_EMAIL=${SMTP_FROM_EMAIL}

# 推送通知
PUSH_NOTIFICATION_KEY=${PUSH_NOTIFICATION_KEY}
FCM_SERVER_KEY=${FCM_SERVER_KEY}

# =============================================================================
# 📊 監控與日誌
# =============================================================================
# Sentry 錯誤追蹤
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=${SENTRY_RELEASE}

# Prometheus 監控
PROMETHEUS_METRICS_ENABLED=true
PROMETHEUS_METRICS_PATH=/metrics

# 日誌級別
LOG_LEVEL=${LOG_LEVEL:-INFO}
LOG_FORMAT=${LOG_FORMAT:-json}

# =============================================================================
# 🔄 任務隊列 & Worker
# =============================================================================
# Celery
CELERY_BROKER_URL=${CELERY_BROKER_URL}
CELERY_RESULT_BACKEND=${CELERY_RESULT_BACKEND}
CELERY_WORKER_CONCURRENCY=${CELERY_WORKER_CONCURRENCY:-4}

# Background Tasks
TASK_QUEUE_REDIS_URL=${TASK_QUEUE_REDIS_URL}
MAX_WORKER_PROCESSES=${MAX_WORKER_PROCESSES:-8}

# =============================================================================
# 🚀 應用程式配置
# =============================================================================
# 環境設置
ENVIRONMENT=production
DEBUG=false
TESTING=false

# 服務端點
API_BASE_URL=${API_BASE_URL:-https://api.autovideo.com}
FRONTEND_URL=${FRONTEND_URL:-https://app.autovideo.com}
ADMIN_URL=${ADMIN_URL:-https://admin.autovideo.com}

# 服務發現
SERVICE_REGISTRY_URL=${SERVICE_REGISTRY_URL}
CONSUL_HOST=${CONSUL_HOST}
CONSUL_PORT=${CONSUL_PORT:-8500}

# =============================================================================
# 💰 支付處理
# =============================================================================
# Stripe
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}

# PayPal
PAYPAL_CLIENT_ID=${PAYPAL_CLIENT_ID}
PAYPAL_CLIENT_SECRET=${PAYPAL_CLIENT_SECRET}
PAYPAL_MODE=${PAYPAL_MODE:-live}

# =============================================================================
# 🔐 安全掃描與合規
# =============================================================================
# API 速率限制
RATE_LIMIT_PER_MINUTE=${RATE_LIMIT_PER_MINUTE:-100}
RATE_LIMIT_PER_HOUR=${RATE_LIMIT_PER_HOUR:-1000}
RATE_LIMIT_PER_DAY=${RATE_LIMIT_PER_DAY:-10000}

# 內容安全策略
CSP_DEFAULT_SRC=${CSP_DEFAULT_SRC:-"'self'"}
CSP_SCRIPT_SRC=${CSP_SCRIPT_SRC:-"'self' 'unsafe-inline'"}
CSP_STYLE_SRC=${CSP_STYLE_SRC:-"'self' 'unsafe-inline'"}

# =============================================================================
# 🔄 備份與災難恢復
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=${BACKUP_SCHEDULE:-"0 2 * * *"}
BACKUP_RETENTION_DAYS=${BACKUP_RETENTION_DAYS:-30}
BACKUP_S3_BUCKET=${BACKUP_S3_BUCKET:-autovideo-backups-prod}

# 災難恢復
DR_REGION=${DR_REGION:-eu-west-1}
DR_BACKUP_ENABLED=${DR_BACKUP_ENABLED:-true}

# =============================================================================
# 📱 移動應用支援
# =============================================================================
MOBILE_API_VERSION=${MOBILE_API_VERSION:-v2}
MOBILE_MIN_VERSION=${MOBILE_MIN_VERSION:-1.0.0}
MOBILE_FORCE_UPDATE=${MOBILE_FORCE_UPDATE:-false}

# =============================================================================
# 🎯 功能開關
# =============================================================================
FEATURE_AI_VOICE_ENABLED=${FEATURE_AI_VOICE_ENABLED:-true}
FEATURE_BATCH_PROCESSING=${FEATURE_BATCH_PROCESSING:-true}
FEATURE_REAL_TIME_PREVIEW=${FEATURE_REAL_TIME_PREVIEW:-true}
FEATURE_ANALYTICS_DASHBOARD=${FEATURE_ANALYTICS_DASHBOARD:-true}

# =============================================================================
# 🔧 性能調優
# =============================================================================
# 併發限制
MAX_CONCURRENT_JOBS=${MAX_CONCURRENT_JOBS:-10}
MAX_QUEUE_SIZE=${MAX_QUEUE_SIZE:-100}
REQUEST_TIMEOUT=${REQUEST_TIMEOUT:-30}

# 快取設置
CACHE_TTL=${CACHE_TTL:-3600}
CACHE_MAX_SIZE=${CACHE_MAX_SIZE:-1000}

# =============================================================================
# 部署說明
# =============================================================================
# 
# 🚀 生產部署步驟：
# 
# 1. 複製此文件為 .env.production.local
# 2. 設置所有 ${VARIABLE_NAME} 的實際值
# 3. 確保 RSA 密鑰對已生成並設置到環境變數
# 4. 使用密鑰管理服務 (如 AWS Secrets Manager, HashiCorp Vault)
# 5. 設置 CI/CD 管道中的環境變數
# 
# 🔒 安全檢查清單：
# 
# □ 所有密鑰都使用強隨機生成
# □ JWT 使用 RS256 非對稱加密
# □ CORS 設置為明確的域名列表
# □ 啟用 HTTPS 和安全標頭
# □ 資料庫連接使用 SSL
# □ 日誌不包含敏感資訊
# □ 定期輪換 API 密鑰
# 
# =============================================================================