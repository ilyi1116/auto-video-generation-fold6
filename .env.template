# ===========================================
# Auto Video Generation System - 環境配置範本
# Phase 2 & 3 統一部署配置
# ===========================================

# ===========================================
# 應用程式基本配置
# ===========================================
ENVIRONMENT=development
LOG_LEVEL=info
DEBUG=true

# 應用程式端口配置
FRONTEND_PORT=3000
API_GATEWAY_PORT=8000
AUTH_SERVICE_PORT=8001
TREND_SERVICE_PORT=8007
STORAGE_SERVICE_PORT=8009
VIDEO_SERVICE_PORT=8004
AI_SERVICE_PORT=8005
SOCIAL_SERVICE_PORT=8006
SCHEDULER_SERVICE_PORT=8008

# ===========================================
# 資料庫配置 (Phase 2 統一配置)
# ===========================================
# PostgreSQL 主資料庫
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
POSTGRES_DB=auto_video_generation

# 資料庫連接字串 (自動構建)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
ASYNC_DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ===========================================
# Redis 快取配置
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_MAX_MEMORY=512mb
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/0

# Redis 資料庫分配 (各服務使用不同的 DB)
REDIS_DB_GATEWAY=0
REDIS_DB_AUTH=1
REDIS_DB_TREND=2
REDIS_DB_STORAGE=3
REDIS_DB_VIDEO=4
REDIS_DB_AI=5
REDIS_DB_SOCIAL=6
REDIS_DB_SCHEDULER=7
REDIS_DB_CELERY_DATA=8
REDIS_DB_CELERY_VIDEO=9
REDIS_DB_CELERY_AI=10
REDIS_DB_CELERY_BEAT=11

# ===========================================
# 物件儲存配置 (MinIO/S3)
# ===========================================
# MinIO 本地開發配置
MINIO_HOST=localhost
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
S3_ACCESS_KEY_ID=${S3_ACCESS_KEY_ID}
S3_SECRET_ACCESS_KEY=${S3_SECRET_ACCESS_KEY}
S3_BUCKET_NAME=auto-video-generation
S3_REGION=us-east-1
S3_ENDPOINT_URL=http://${MINIO_HOST}:${MINIO_PORT}

# 生產環境 S3 配置 (取消註解並更新)
# S3_ENDPOINT_URL=https://s3.amazonaws.com
# S3_ACCESS_KEY_ID=${S3_ACCESS_KEY_ID}
# S3_SECRET_ACCESS_KEY=${S3_SECRET_ACCESS_KEY}

# ===========================================
# 認證與安全配置
# ===========================================
# JWT 設定
JWT_SECRET_KEY=${JWT_SECRET_KEY}
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# 加密設定
SECRET_KEY=${SECRET_KEY}
ENCRYPTION_KEY=${ENCRYPTION_KEY}

# OAuth 設定 (如需要)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# ===========================================
# Celery 非同步任務配置
# ===========================================
CELERY_BROKER_URL=redis://${REDIS_HOST}:${REDIS_PORT}/12
CELERY_RESULT_BACKEND=redis://${REDIS_HOST}:${REDIS_PORT}/13
CELERY_TASK_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=Asia/Taipei
CELERY_ENABLE_UTC=true

# Celery Beat 排程設定
CELERY_BEAT_SCHEDULER=django_celery_beat.schedulers:DatabaseScheduler

# ===========================================
# AI 服務配置
# ===========================================
# OpenAI API
OPENAI_API_KEY=${OPENAI_API_KEY}
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# Google Gemini API
GOOGLE_AI_API_KEY=${GOOGLE_AI_API_KEY}
GEMINI_MODEL=gemini-pro

# Stable Diffusion API
STABILITY_API_KEY=${STABILITY_API_KEY}
STABILITY_HOST=https://api.stability.ai

# Suno AI API (音樂生成)
SUNO_API_KEY=${SUNO_API_KEY}
SUNO_BASE_URL=https://api.suno.ai

# ===========================================
# 社群媒體平台配置
# ===========================================
# TikTok API
TIKTOK_CLIENT_ID=${TIKTOK_CLIENT_ID}
TIKTOK_CLIENT_SECRET=${TIKTOK_CLIENT_SECRET}

# YouTube API
YOUTUBE_API_KEY=${YOUTUBE_API_KEY}
YOUTUBE_CLIENT_ID=${YOUTUBE_CLIENT_ID}
YOUTUBE_CLIENT_SECRET=${YOUTUBE_CLIENT_SECRET}

# Instagram API
INSTAGRAM_CLIENT_ID=${INSTAGRAM_CLIENT_ID}
INSTAGRAM_CLIENT_SECRET=${INSTAGRAM_CLIENT_SECRET}

# Twitter/X API
TWITTER_API_KEY=${TWITTER_API_KEY}
TWITTER_API_SECRET=${TWITTER_API_SECRET}
TWITTER_ACCESS_TOKEN=${TWITTER_ACCESS_TOKEN}
TWITTER_ACCESS_TOKEN_SECRET=${TWITTER_ACCESS_TOKEN_SECRET}

# ===========================================
# 監控與日誌配置
# ===========================================
# Prometheus 監控
PROMETHEUS_PORT=9090
METRICS_ENABLED=true
PROMETHEUS_NAMESPACE=auto_video_generation

# Grafana 儀表板
GRAFANA_PORT=3001
GRAFANA_PASSWORD=${GRAFANA_PASSWORD}

# 日誌配置
LOG_FORMAT=json
LOG_FILE_PATH=/app/logs/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# Sentry 錯誤追蹤 (可選)
SENTRY_DSN=
SENTRY_ENVIRONMENT=${ENVIRONMENT}

# ===========================================
# 電子郵件配置
# ===========================================
# SMTP 設定
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_TLS=true
SMTP_SSL=false

# 發件人資訊
MAIL_FROM=noreply@yourdomain.com
MAIL_FROM_NAME=Auto Video Generation

# ===========================================
# 域名與 URL 配置
# ===========================================
# 前端域名
FRONTEND_URL=http://localhost:3000
PUBLIC_API_URL=http://localhost:8000

# 生產環境域名 (取消註解並更新)
# FRONTEND_URL=https://app.yourdomain.com
# PUBLIC_API_URL=https://api.yourdomain.com

# CORS 設定
CORS_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]
CORS_CREDENTIALS=true

# ===========================================
# SSL/TLS 配置
# ===========================================
SSL_ENABLED=false
SSL_CERT_PATH=/app/certs/domain.crt
SSL_KEY_PATH=/app/certs/domain.key
SSL_CA_PATH=/app/certs/ca.crt

# ===========================================
# 開發與除錯配置
# ===========================================
# 開發模式設定
DEV_MODE=true
AUTO_RELOAD=true
SHOW_DOCS=true

# 測試配置
TEST_DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@localhost:5432/auto_video_generation_test
TESTING=false

# Docker 構建配置
BUILD_TARGET=development
DOCKER_BUILDKIT=1

# ===========================================
# 性能與限制配置
# ===========================================
# API 速率限制
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# 上傳限制
MAX_UPLOAD_SIZE=100MB
MAX_VIDEO_DURATION=300
MAX_AUDIO_DURATION=600

# 資料庫連接池
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=0
DB_POOL_TIMEOUT=30

# 快取配置
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# ===========================================
# 企業功能配置 (可選)
# ===========================================
# 多租戶支援
MULTI_TENANT_ENABLED=false
DEFAULT_TENANT=default

# 使用配額
USER_QUOTA_ENABLED=true
DEFAULT_MONTHLY_QUOTA=1000
PREMIUM_MONTHLY_QUOTA=10000

# 分析追蹤
ANALYTICS_ENABLED=true
GOOGLE_ANALYTICS_ID=
MIXPANEL_TOKEN=

# ===========================================
# 備份與災難復原配置
# ===========================================
# 自動備份設定
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=auto-video-backups

# 災難復原
DR_ENABLED=false
DR_REGION=us-west-2
DR_RTO_MINUTES=60
DR_RPO_MINUTES=15