## 溝通語言設定
**重要：所有與 Claude 的對話請只使用繁體中文回答**

## 系統架構與藍圖

### 生產級聲音克隆系統架構筆記

#### 核心設計理念
- 採用 DevSecOps 思維模式
- 強調模組化、安全性與可維護性
- 基於微服務架構的現代化系統設計

#### 技術棧選擇重點
- 後端：FastAPI (Python)
- 前端：SvelteKit (Node.js)
- 非同步任務：Celery
- 資料庫：PostgreSQL, Redis, S3
- 容器化：Docker
- CI/CD：GitHub Actions

#### 系統架構關鍵服務
- API 閘道器
- 使用者認證服務
- 語音資料接收與預處理服務
- 非同步模型訓練服務
- 即時推論服務

#### 安全性與可維護性策略
- 多層次安全框架
- 自動化安全掃描 (Snyk, Trivy)
- 結構化日誌記錄
- 全面自動化測試流程
- 持續整合與部署 (CI/CD)

#### 未來發展路線
- 分階段實施
- 逐步擴展功能
- 持續優化架構

## 前端開發完成狀態

### 已完成的頁面與功能 ✅

#### 核心頁面
- **登入/註冊系統** (`/login`, `/register`, `/forgot-password`)
  - 完整的身份驗證流程
  - 表單驗證與錯誤處理
  - 深色模式支援

- **儀表板** (`/dashboard`)
  - 統計概覽與快速動作
  - 最近影片與趨勢主題
  - 響應式設計

- **專案管理** (`/projects`)
  - 專案列表與搜尋功能
  - 批次操作與篩選
  - 狀態追蹤

#### AI 工具頁面
- **腳本生成器** (`/ai/script`)
  - 多平台優化設定
  - 趨勢主題建議
  - 腳本歷史記錄

- **圖像生成器** (`/ai/images`)
  - 高級圖像生成介面
  - 風格選擇與品質控制
  - 批次生成與管理

- **語音合成** (`/ai/voice`)
  - 多語言語音選項
  - 情感與速度控制
  - 自訂語音上傳

#### 工作流程頁面
- **影片創建** (`/create`)
  - 5步驟引導式工作流程
  - 專案設定與腳本生成
  - 視覺創建與語音合成
  - 影片組裝

#### 分析與洞察
- **數據分析** (`/analytics`)
  - 綜合效能儀表板
  - 受眾人口統計
  - 平台效能比較

- **趨勢分析** (`/trends`)
  - 即時趨勢追蹤
  - 病毒內容分析
  - 關鍵字研究工具

#### 社群媒體管理
- **社群媒體** (`/social`)
  - 多平台發布與排程
  - 平台連接管理
  - 即時分析與效能指標
  - 內容日曆

#### 設定與個人檔案
- **設定頁面** (`/settings`)
  - 6個主要類別設定
  - 個人資訊管理
  - 通知偏好設定
  - 隱私與數據控制
  - 外觀自訂設定
  - 計費與訂閱管理
  - 安全功能設定

- **個人檔案** (`/profile`)
  - 完整的用戶檔案介面
  - 內容組織與展示
  - 活動時間軸
  - 成就系統

### 技術實作亮點

#### 設計系統
- **一致的 UI/UX**: 現代化設計模式與用戶體驗
- **響應式設計**: 所有頁面在行動與桌面裝置上無縫運作
- **深色模式**: 完整的深/淺主題相容性
- **無障礙設計**: 適當的 ARIA 標籤與鍵盤導航

#### 技術架構
- **Svelte 反應式**: 高效的組件結構與狀態管理
- **模組化組件**: 組件組合與重用性
- **表單驗證**: 表單驗證與錯誤處理
- **載入狀態**: 高效的組件結構與載入狀態
- **API 整合**: 完整的 API 客戶端設定

#### 開發模式
- **Toast 通知**: 用戶回饋系統
- **模態對話框**: 確認流程
- **網格與列表**: 檢視切換功能
- **搜尋與篩選**: 搜尋與篩選功能

### 專案完成度
🎯 **前端開發完成度: 100%**

所有主要功能頁面已實作完成，包含完整的 AI 影片生成平台所需的所有前端功能。

## 開發流程與品質保證

### 🧪 測試開發要求

#### 必要測試類型
每次開發完成後，**必須**撰寫以下完整測試程式：

1. **單元測試 (Unit Tests)**
   - 對所有新增/修改的函數進行測試
   - 使用 Jest 或 Vitest 作為測試框架
   - 測試覆蓋率必須達到 80% 以上
   - 測試檔案放置於 `__tests__` 或 `.test.js/.test.ts` 檔案中

2. **組件測試 (Component Tests)**
   - 對所有 Svelte 組件進行渲染測試
   - 使用 @testing-library/svelte 進行互動測試
   - 測試組件的 props、events 和 slots
   - 驗證組件在不同狀態下的行為

3. **整合測試 (Integration Tests)**
   - 測試 API 整合功能
   - 測試多個組件間的協作
   - 使用 Mock Service Worker (MSW) 模擬 API

4. **端對端測試 (E2E Tests)**
   - 使用 Playwright 或 Cypress
   - 測試關鍵用戶流程
   - 涵蓋主要功能路徑

#### 測試執行命令
```bash
# 前端測試
npm run test              # 執行所有測試
npm run test:unit         # 單元測試
npm run test:component    # 組件測試
npm run test:integration  # 整合測試
npm run test:e2e         # 端對端測試
npm run test:coverage    # 測試覆蓋率報告

# 後端測試
pytest tests/             # Python 後端測試
pytest --cov=app tests/   # 覆蓋率測試
```

### 🐳 Docker 驗證要求

#### 容器化驗證流程
每次開發完成後，**必須**確保應用可在 Docker 環境中正常執行：

1. **本地 Docker 驗證**
   ```bash
   # 構建並運行完整系統
   docker-compose up --build
   
   # 驗證各服務狀態
   docker-compose ps
   
   # 檢查服務日誌
   docker-compose logs [service-name]
   ```

2. **多階段構建驗證**
   - 確保 Dockerfile 多階段構建正常
   - 驗證生產環境映像檔大小合理
   - 測試容器啟動時間和資源使用

3. **服務間通信測試**
   - 驗證微服務間的網路連接
   - 測試 API 閘道器路由功能
   - 確認資料庫連接正常

4. **健康檢查驗證**
   ```bash
   # 檢查所有服務健康狀態
   curl http://localhost:8080/health
   curl http://localhost:3000/health
   ```

#### Docker 測試清單
- [ ] 所有容器正常啟動
- [ ] 前端可正常訪問 (http://localhost:3000)
- [ ] API 閘道器回應正常 (http://localhost:8080)
- [ ] 資料庫連接正常
- [ ] Redis 快取功能正常
- [ ] 檔案上傳/下載功能正常
- [ ] 日誌收集正常運作
- [ ] 服務發現機制正常

### 📋 開發完成驗證檢核表

每次功能開發完成時，必須完成以下檢核：

#### 程式碼品質
- [ ] 通過所有單元測試 (覆蓋率 ≥ 80%)
- [ ] 通過所有整合測試
- [ ] 通過 ESLint/Prettier 程式碼格式檢查
- [ ] 通過 TypeScript 類型檢查 (如適用)
- [ ] 程式碼審查完成

#### 功能驗證
- [ ] 功能在本地開發環境正常運作
- [ ] 功能在 Docker 環境正常運作
- [ ] 響應式設計在多種裝置上正常顯示
- [ ] 深色模式功能正常
- [ ] 無障礙功能符合標準

#### 效能與安全
- [ ] 頁面載入時間 < 3 秒
- [ ] API 回應時間 < 500ms
- [ ] 通過安全性掃描 (無高風險漏洞)
- [ ] 通過 Lighthouse 效能測試 (≥ 90 分)

#### 文檔更新
- [ ] 更新相關 API 文檔
- [ ] 更新組件使用說明
- [ ] 更新部署文檔
- [ ] 更新 CHANGELOG.md

### 🚀 部署前驗證

在部署到生產環境前，額外執行：

```bash
# 完整測試套件
npm run test:all
pytest tests/ --cov=app

# Docker 生產環境驗證
docker-compose -f docker-compose.prod.yml up --build

# 效能基準測試
npm run benchmark
```

**重要提醒**: 只有通過所有測試和 Docker 驗證的程式碼才能合併到主分支或部署到生產環境。