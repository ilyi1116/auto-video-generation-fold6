# =============================================================================
# 🔐 AutoVideo 生產環境 Kubernetes Secrets 配置
# =============================================================================
# 
# 注意：此文件為範本配置，實際部署時請勿包含真實密鑰值
# 使用密鑰管理服務或加密工具處理敏感資訊
#
# 創建日期: 2025-08-05
# 維護者: DevOps & Security Team
# =============================================================================

apiVersion: v1
kind: Namespace
metadata:
  name: autovideo-prod
  labels:
    name: autovideo-prod
    environment: production
    security-level: high
---
# =============================================================================
# JWT 認證密鑰 - 使用 RSA 非對稱加密
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: jwt-secrets
  namespace: autovideo-prod
  labels:
    app: autovideo
    component: auth
    environment: production
  annotations:
    kubernetes.io/description: "JWT RSA 密鑰對用於 token 簽名和驗證"
type: Opaque
data:
  # Base64 編碼的 RSA 2048 私鑰 - 請使用實際生成的密鑰
  jwt-private-key: LS0tLS1CRUdJTi...BASE64_ENCODED_PRIVATE_KEY...LS0tLS0K
  # Base64 編碼的 RSA 2048 公鑰 - 請使用實際生成的密鑰
  jwt-public-key: LS0tLS1CRUdJTi...BASE64_ENCODED_PUBLIC_KEY...LS0tLS0K
---
# =============================================================================
# 資料庫連接密鑰
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: database-secrets
  namespace: autovideo-prod
  labels:
    app: autovideo
    component: database
    environment: production
  annotations:
    kubernetes.io/description: "資料庫連接密碼和連接字串"
type: Opaque
stringData:
  # PostgreSQL 主資料庫密碼 - 32位強隨機密碼
  postgres-password: "REPLACE_WITH_GENERATED_32_CHAR_PASSWORD"
  # Redis 快取密碼 - 32位強隨機密碼
  redis-password: "REPLACE_WITH_GENERATED_32_CHAR_PASSWORD"
  # 完整的資料庫連接 URL (包含 SSL 設置)
  postgres-url: "postgresql://autovideo:POSTGRES_PASSWORD@postgres-primary:5432/autovideo_prod?sslmode=require&pool_min_conns=5&pool_max_conns=20"
  # Redis 連接 URL
  redis-url: "redis://:REDIS_PASSWORD@redis-primary:6379/0"
  # 資料庫連接池配置
  db-pool-size: "20"
  db-max-overflow: "30"
  db-pool-timeout: "30"
---
# =============================================================================
# AI 服務 API 密鑰
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: ai-api-secrets
  namespace: autovideo-prod
  labels:
    app: autovideo
    component: ai-services
    environment: production
  annotations:
    kubernetes.io/description: "第三方 AI 服務 API 密鑰"
type: Opaque
stringData:
  # OpenAI API 密鑰和組織 ID
  openai-api-key: "sk-REPLACE_WITH_ACTUAL_OPENAI_API_KEY"
  openai-org-id: "org-REPLACE_WITH_ACTUAL_ORG_ID"
  # Google Gemini API 密鑰和專案 ID
  gemini-api-key: "REPLACE_WITH_ACTUAL_GEMINI_API_KEY"
  gemini-project-id: "REPLACE_WITH_ACTUAL_PROJECT_ID"
  # Suno AI API 密鑰
  suno-api-key: "REPLACE_WITH_ACTUAL_SUNO_API_KEY"
  suno-org-id: "REPLACE_WITH_ACTUAL_SUNO_ORG_ID"
  # Stable Diffusion API 密鑰
  stable-diffusion-api-key: "REPLACE_WITH_ACTUAL_SD_API_KEY"
  # Anthropic Claude API 密鑰
  anthropic-api-key: "REPLACE_WITH_ACTUAL_ANTHROPIC_API_KEY"
---
# =============================================================================
# 雲端存儲密鑰
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: storage-secrets
  namespace: autovideo-prod
  labels:
    app: autovideo
    component: storage
    environment: production
  annotations:
    kubernetes.io/description: "雲端存儲服務憑證"
type: Opaque
stringData:
  # AWS S3 憑證
  aws-access-key-id: "REPLACE_WITH_ACTUAL_AWS_ACCESS_KEY"
  aws-secret-access-key: "REPLACE_WITH_ACTUAL_AWS_SECRET_KEY"
  aws-region: "us-west-2"
  aws-s3-bucket: "autovideo-prod-storage"
  # CloudFlare R2 備用存儲
  cloudflare-r2-access-key: "REPLACE_WITH_ACTUAL_R2_ACCESS_KEY"
  cloudflare-r2-secret-key: "REPLACE_WITH_ACTUAL_R2_SECRET_KEY"
  cloudflare-r2-endpoint: "https://ACCOUNT_ID.r2.cloudflarestorage.com"
  cloudflare-r2-bucket: "autovideo-prod-r2"
---
# =============================================================================
# 支付處理密鑰
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: payment-secrets
  namespace: autovideo-prod
  labels:
    app: autovideo
    component: payment
    environment: production
  annotations:
    kubernetes.io/description: "支付處理服務密鑰"
type: Opaque
stringData:
  # Stripe 支付密鑰
  stripe-publishable-key: "pk_live_REPLACE_WITH_ACTUAL_STRIPE_PUBLISHABLE_KEY"
  stripe-secret-key: "sk_live_REPLACE_WITH_ACTUAL_STRIPE_SECRET_KEY"
  stripe-webhook-secret: "whsec_REPLACE_WITH_ACTUAL_WEBHOOK_SECRET"
  # PayPal 憑證
  paypal-client-id: "REPLACE_WITH_ACTUAL_PAYPAL_CLIENT_ID"
  paypal-client-secret: "REPLACE_WITH_ACTUAL_PAYPAL_CLIENT_SECRET"
  paypal-mode: "live"
---
# =============================================================================
# 通知服務密鑰
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: notification-secrets
  namespace: autovideo-prod
  labels:
    app: autovideo
    component: notification
    environment: production
  annotations:
    kubernetes.io/description: "郵件和推送通知服務密鑰"
type: Opaque
stringData:
  # SMTP 郵件服務配置
  smtp-host: "smtp.gmail.com"
  smtp-port: "587"
  smtp-user: "noreply@autovideo.com"
  smtp-password: "REPLACE_WITH_ACTUAL_SMTP_PASSWORD"
  smtp-from-email: "AutoVideo <noreply@autovideo.com>"
  # Firebase Cloud Messaging
  fcm-server-key: "REPLACE_WITH_ACTUAL_FCM_SERVER_KEY"
  # 推送通知服務密鑰
  push-notification-key: "REPLACE_WITH_ACTUAL_PUSH_KEY"
---
# =============================================================================
# 監控和日誌密鑰
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: monitoring-secrets
  namespace: autovideo-prod
  labels:
    app: autovideo
    component: monitoring
    environment: production
  annotations:
    kubernetes.io/description: "監控、日誌和錯誤追蹤服務密鑰"
type: Opaque
stringData:
  # Sentry 錯誤追蹤
  sentry-dsn: "https://REPLACE_WITH_ACTUAL_SENTRY_DSN@sentry.io/PROJECT_ID"
  sentry-environment: "production"
  sentry-release: "v1.0.0"
  # Grafana Cloud 或其他監控服務
  grafana-api-key: "REPLACE_WITH_ACTUAL_GRAFANA_API_KEY"
  # 日誌聚合服務 (如 LogDNA, Datadog)
  log-service-key: "REPLACE_WITH_ACTUAL_LOG_SERVICE_KEY"
---
# =============================================================================
# 應用程式核心密鑰
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: app-core-secrets
  namespace: autovideo-prod
  labels:
    app: autovideo
    component: core
    environment: production
  annotations:
    kubernetes.io/description: "應用程式核心加密和會話密鑰"
type: Opaque
stringData:
  # 應用程式主密鑰 - 64位隨機生成
  app-secret-key: "REPLACE_WITH_64_CHAR_APP_SECRET_KEY"
  # 會話加密密鑰 - 32位隨機生成
  session-secret: "REPLACE_WITH_32_CHAR_SESSION_SECRET"
  # 資料加密密鑰 - 32位隨機生成
  encryption-key: "REPLACE_WITH_32_CHAR_ENCRYPTION_KEY"
  # Cookie 簽名密鑰
  cookie-secret: "REPLACE_WITH_32_CHAR_COOKIE_SECRET"
  # CSRF 保護密鑰
  csrf-secret: "REPLACE_WITH_32_CHAR_CSRF_SECRET"
---
# =============================================================================
# 服務發現和註冊密鑰
# =============================================================================
apiVersion: v1  
kind: Secret
metadata:
  name: service-registry-secrets
  namespace: autovideo-prod
  labels:
    app: autovideo
    component: service-discovery
    environment: production
  annotations:
    kubernetes.io/description: "服務發現和註冊中心密鑰"
type: Opaque
stringData:
  # Consul 服務發現
  consul-gossip-key: "REPLACE_WITH_BASE64_GOSSIP_KEY"
  consul-master-token: "REPLACE_WITH_CONSUL_MASTER_TOKEN"
  # 服務網格認證
  service-mesh-ca-cert: "REPLACE_WITH_SERVICE_MESH_CA_CERT"
  service-mesh-ca-key: "REPLACE_WITH_SERVICE_MESH_CA_KEY"
---
# =============================================================================
# 備份和災難恢復密鑰
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: backup-secrets
  namespace: autovideo-prod
  labels:
    app: autovideo
    component: backup
    environment: production
  annotations:
    kubernetes.io/description: "備份和災難恢復服務密鑰"
type: Opaque
stringData:
  # 備份存儲憑證
  backup-s3-access-key: "REPLACE_WITH_BACKUP_S3_ACCESS_KEY"
  backup-s3-secret-key: "REPLACE_WITH_BACKUP_S3_SECRET_KEY"
  backup-s3-bucket: "autovideo-backups-prod"
  # 備份加密密鑰
  backup-encryption-key: "REPLACE_WITH_BACKUP_ENCRYPTION_KEY"
  # 災難恢復區域配置
  dr-region: "eu-west-1"
  dr-s3-bucket: "autovideo-dr-prod"