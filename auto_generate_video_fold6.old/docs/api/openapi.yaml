openapi: 3.0.3
info:
  title: Auto Video Generation System API
  description: |
    Auto Video Generation System æ˜¯ä¸€å€‹å®Œæ•´çš„ AI é©…å‹•å½±ç‰‡ç”Ÿæˆå¹³å°ï¼Œ
    æä¾›å¾è…³æœ¬ç”Ÿæˆåˆ°å½±ç‰‡ç™¼å¸ƒçš„ç«¯åˆ°ç«¯è‡ªå‹•åŒ–æµç¨‹ã€‚
    
    ## ä¸»è¦åŠŸèƒ½
    - ğŸ¬ è‡ªå‹•å½±ç‰‡ç”Ÿæˆ
    - ğŸ­ AI èªéŸ³å…‹éš†
    - ğŸ¨ æ™ºèƒ½å…§å®¹å‰µä½œ
    - ğŸ“± ç¤¾ç¾¤åª’é«”æ•´åˆ
    - ğŸ“Š è¶¨å‹¢åˆ†æ
    - â° è‡ªå‹•æ’ç¨‹ç™¼å¸ƒ
    
    ## èªè­‰
    æ‰€æœ‰ API ç«¯é»éƒ½éœ€è¦ JWT èªè­‰ï¼Œè«‹åœ¨è«‹æ±‚æ¨™é ­ä¸­åŒ…å«ï¼š
    ```
    Authorization: Bearer <your_jwt_token>
    ```
    
    ## é€Ÿç‡é™åˆ¶
    - ä¸€èˆ¬ç«¯é»ï¼š30 è«‹æ±‚/åˆ†é˜
    - å½±ç‰‡ç”Ÿæˆï¼š10 è«‹æ±‚/åˆ†é˜
    - æª”æ¡ˆä¸Šå‚³ï¼š20 è«‹æ±‚/åˆ†é˜
    - ç®¡ç†ç«¯é»ï¼š10 è«‹æ±‚/åˆ†é˜
  version: 1.0.0
  contact:
    name: API Support
    email: support@video-system.com
    url: https://video-system.com/support
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.video-system.com/v1
    description: Production server
  - url: http://localhost:8000/v1
    description: Development server

security:
  - BearerAuth: []

paths:
  /auth/register:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ¶è¨»å†Š
      description: å‰µå»ºæ–°ç”¨æˆ¶å¸³æˆ¶
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - username
              properties:
                email:
                  type: string
                  format: email
                  description: ç”¨æˆ¶é›»å­éƒµä»¶
                password:
                  type: string
                  minLength: 8
                  description: ç”¨æˆ¶å¯†ç¢¼
                username:
                  type: string
                  minLength: 3
                  maxLength: 50
                  description: ç”¨æˆ¶åç¨±
      responses:
        '201':
          description: è¨»å†ŠæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          description: è«‹æ±‚åƒæ•¸éŒ¯èª¤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: ç”¨æˆ¶å·²å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/login:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ¶ç™»å…¥
      description: ä½¿ç”¨é›»å­éƒµä»¶å’Œå¯†ç¢¼ç™»å…¥
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  description: ç”¨æˆ¶é›»å­éƒµä»¶
                password:
                  type: string
                  description: ç”¨æˆ¶å¯†ç¢¼
      responses:
        '200':
          description: ç™»å…¥æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '401':
          description: èªè­‰å¤±æ•—
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/me:
    get:
      tags:
        - Authentication
      summary: ç²å–ç”¨æˆ¶è³‡æ–™
      description: ç²å–ç•¶å‰ç™»å…¥ç”¨æˆ¶çš„è³‡æ–™
      security:
        - BearerAuth: []
      responses:
        '200':
          description: æˆåŠŸç²å–ç”¨æˆ¶è³‡æ–™
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: æœªæˆæ¬Š
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /video/generate:
    post:
      tags:
        - Video Generation
      summary: å‰µå»ºå½±ç‰‡ç”Ÿæˆå°ˆæ¡ˆ
      description: é–‹å§‹ä¸€å€‹æ–°çš„å½±ç‰‡ç”Ÿæˆå°ˆæ¡ˆ
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VideoGenerationRequest'
      responses:
        '201':
          description: å°ˆæ¡ˆå‰µå»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VideoProjectResponse'
        '400':
          description: è«‹æ±‚åƒæ•¸éŒ¯èª¤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: æœªæˆæ¬Š
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /video/projects/{project_id}:
    get:
      tags:
        - Video Generation
      summary: ç²å–å½±ç‰‡å°ˆæ¡ˆ
      description: ç²å–ç‰¹å®šå½±ç‰‡å°ˆæ¡ˆçš„è©³ç´°è³‡è¨Š
      security:
        - BearerAuth: []
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
          description: å°ˆæ¡ˆ ID
      responses:
        '200':
          description: æˆåŠŸç²å–å°ˆæ¡ˆ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VideoProjectResponse'
        '404':
          description: å°ˆæ¡ˆä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /video/projects:
    get:
      tags:
        - Video Generation
      summary: ç²å–ç”¨æˆ¶å½±ç‰‡å°ˆæ¡ˆåˆ—è¡¨
      description: ç²å–ç•¶å‰ç”¨æˆ¶çš„æ‰€æœ‰å½±ç‰‡å°ˆæ¡ˆ
      security:
        - BearerAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
            maximum: 100
          description: æ¯é å°ˆæ¡ˆæ•¸é‡
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
          description: åç§»é‡
      responses:
        '200':
          description: æˆåŠŸç²å–å°ˆæ¡ˆåˆ—è¡¨
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/VideoProjectResponse'

  /ai/script/generate:
    post:
      tags:
        - AI Services
      summary: ç”Ÿæˆè…³æœ¬
      description: ä½¿ç”¨ AI ç”Ÿæˆå½±ç‰‡è…³æœ¬
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScriptGenerationRequest'
      responses:
        '200':
          description: è…³æœ¬ç”ŸæˆæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GeneratedScript'

  /ai/voice/synthesize:
    post:
      tags:
        - AI Services
      summary: èªéŸ³åˆæˆ
      description: å°‡æ–‡å­—è½‰æ›ç‚ºèªéŸ³
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VoiceSynthesisRequest'
      responses:
        '200':
          description: èªéŸ³åˆæˆæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceSynthesisResponse'

  /social/posts:
    get:
      tags:
        - Social Media
      summary: ç²å–ç¤¾ç¾¤åª’é«”è²¼æ–‡
      description: ç²å–ç”¨æˆ¶çš„ç¤¾ç¾¤åª’é«”è²¼æ–‡åˆ—è¡¨
      security:
        - BearerAuth: []
      responses:
        '200':
          description: æˆåŠŸç²å–è²¼æ–‡åˆ—è¡¨
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SocialPost'

  /trends/analysis:
    get:
      tags:
        - Trends
      summary: ç²å–è¶¨å‹¢åˆ†æ
      description: ç²å–ç•¶å‰ç†±é–€è¶¨å‹¢åˆ†æ
      security:
        - BearerAuth: []
      responses:
        '200':
          description: æˆåŠŸç²å–è¶¨å‹¢åˆ†æ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TrendsAnalysis'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
          format: email
        username:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
        - id
        - email
        - username

    AuthResponse:
      type: object
      properties:
        access_token:
          type: string
        refresh_token:
          type: string
        token_type:
          type: string
          default: bearer
        expires_in:
          type: integer
          description: Token éæœŸæ™‚é–“ï¼ˆç§’ï¼‰
        user:
          $ref: '#/components/schemas/User'
      required:
        - access_token
        - token_type
        - user

    VideoGenerationRequest:
      type: object
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
          maxLength: 1000
        theme:
          type: string
          description: å½±ç‰‡ä¸»é¡Œ
        style:
          type: string
          default: modern
          description: è¦–è¦ºé¢¨æ ¼
        duration:
          type: integer
          minimum: 15
          maximum: 300
          default: 60
          description: å½±ç‰‡æ™‚é•·ï¼ˆç§’ï¼‰
        voice_type:
          type: string
          default: default
          description: èªéŸ³é¡å‹
        music_genre:
          type: string
          default: ambient
          description: èƒŒæ™¯éŸ³æ¨‚é¡å‹
        include_captions:
          type: boolean
          default: true
          description: æ˜¯å¦åŒ…å«å­—å¹•
        target_platform:
          type: string
          enum: [youtube, tiktok, instagram, facebook]
          default: youtube
          description: ç›®æ¨™å¹³å°
      required:
        - title
        - theme

    VideoProjectResponse:
      type: object
      properties:
        project_id:
          type: string
          format: uuid
        title:
          type: string
        status:
          type: string
          enum: [pending, generating_script, generating_voice, generating_images, composing, rendering, completed, failed]
        progress:
          type: integer
          minimum: 0
          maximum: 100
        created_at:
          type: string
          format: date-time
        estimated_completion:
          type: string
          format: date-time
        preview_url:
          type: string
          format: uri
        final_url:
          type: string
          format: uri
      required:
        - project_id
        - title
        - status
        - progress
        - created_at

    ScriptGenerationRequest:
      type: object
      properties:
        theme:
          type: string
          description: è…³æœ¬ä¸»é¡Œ
        duration:
          type: integer
          description: ç›®æ¨™æ™‚é•·ï¼ˆç§’ï¼‰
        style:
          type: string
          description: å…§å®¹é¢¨æ ¼
        target_audience:
          type: string
          description: ç›®æ¨™è§€çœ¾
      required:
        - theme
        - duration

    GeneratedScript:
      type: object
      properties:
        content:
          type: string
          description: å®Œæ•´è…³æœ¬å…§å®¹
        scenes:
          type: array
          items:
            type: object
            properties:
              scene_number:
                type: integer
              description:
                type: string
              visual_description:
                type: string
              narration_text:
                type: string
              duration:
                type: integer
        narration_text:
          type: string
          description: ç´”æ–‡å­—æ•˜è¿°
      required:
        - content
        - scenes
        - narration_text

    VoiceSynthesisRequest:
      type: object
      properties:
        text:
          type: string
          description: è¦åˆæˆçš„æ–‡å­—
        voice_type:
          type: string
          description: èªéŸ³é¡å‹
        speed:
          type: number
          default: 1.0
          description: èªéŸ³é€Ÿåº¦
        pitch:
          type: number
          default: 1.0
          description: èªéŸ³éŸ³èª¿
      required:
        - text

    VoiceSynthesisResponse:
      type: object
      properties:
        audio_url:
          type: string
          format: uri
          description: ç”Ÿæˆçš„éŸ³é »æª”æ¡ˆ URL
        duration:
          type: number
          description: éŸ³é »æ™‚é•·ï¼ˆç§’ï¼‰
        word_count:
          type: integer
          description: æ–‡å­—å­—æ•¸
      required:
        - audio_url
        - duration

    SocialPost:
      type: object
      properties:
        id:
          type: string
          format: uuid
        platform:
          type: string
          enum: [youtube, tiktok, instagram, facebook]
        content:
          type: string
        media_url:
          type: string
          format: uri
        scheduled_time:
          type: string
          format: date-time
        status:
          type: string
          enum: [draft, scheduled, published, failed]
        engagement_metrics:
          type: object
          properties:
            views:
              type: integer
            likes:
              type: integer
            shares:
              type: integer
            comments:
              type: integer

    TrendsAnalysis:
      type: object
      properties:
        trending_topics:
          type: array
          items:
            type: object
            properties:
              topic:
                type: string
              popularity_score:
                type: number
              growth_rate:
                type: number
              related_keywords:
                type: array
                items:
                  type: string
        platform_insights:
          type: object
          properties:
            youtube:
              type: object
            tiktok:
              type: object
            instagram:
              type: object
        recommendations:
          type: array
          items:
            type: string

    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: éŒ¯èª¤è¨Šæ¯
        code:
          type: string
          description: éŒ¯èª¤ä»£ç¢¼
        details:
          type: object
          description: è©³ç´°éŒ¯èª¤è³‡è¨Š
      required:
        - error

tags:
  - name: Authentication
    description: ç”¨æˆ¶èªè­‰ç›¸é—œ API
  - name: Video Generation
    description: å½±ç‰‡ç”Ÿæˆç›¸é—œ API
  - name: AI Services
    description: AI æœå‹™ç›¸é—œ API
  - name: Social Media
    description: ç¤¾ç¾¤åª’é«”æ•´åˆ API
  - name: Trends
    description: è¶¨å‹¢åˆ†æç›¸é—œ API