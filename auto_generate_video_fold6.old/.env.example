# =============================================================================
# 自動生成短影音系統 - 環境變數配置範本
# =============================================================================
# 請複製此檔案為 .env 並填入實際的配置值
# 警告：絕對不要將 .env 檔案提交到版本控制系統中

# =============================================================================
# 基本環境配置
# =============================================================================
NODE_ENV=development

# =============================================================================
# 資料庫配置
# =============================================================================
POSTGRES_USER=auto_video_user
POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
POSTGRES_DB=auto_video_db
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# 讀寫分離配置 (可選)
DATABASE_READ_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres-read:5432/${POSTGRES_DB}

# 連接池配置
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# JWT 安全配置
# =============================================================================
# 使用 openssl rand -hex 32 生成
JWT_SECRET=${JWT_SECRET}
JWT_ALGORITHM=RS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# =============================================================================
# Redis 配置
# =============================================================================
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=${REDIS_PASSWORD}

# =============================================================================
# MinIO/S3 存儲配置
# =============================================================================
S3_ACCESS_KEY_ID=${S3_ACCESS_KEY_ID}
S3_SECRET_ACCESS_KEY=${S3_SECRET_ACCESS_KEY}
S3_ENDPOINT_URL=http://minio:9000
S3_BUCKET_NAME=auto-video-storage
S3_REGION=us-east-1

# =============================================================================
# AI 服務 API 密鑰
# =============================================================================
# OpenAI API
OPENAI_API_KEY=${OPENAI_API_KEY}

# Google Gemini API
GOOGLE_API_KEY=${GOOGLE_API_KEY}

# Stability AI (Stable Diffusion)
STABILITY_API_KEY=${STABILITY_API_KEY}

# Suno AI (語音合成)
SUNO_API_KEY=${SUNO_API_KEY}

# ElevenLabs (語音合成備選)
ELEVENLABS_API_KEY=${ELEVENLABS_API_KEY}

# =============================================================================
# 社交媒體平台 API 配置
# =============================================================================
# TikTok
TIKTOK_CLIENT_ID=${TIKTOK_CLIENT_ID}
TIKTOK_CLIENT_SECRET=${TIKTOK_CLIENT_SECRET}

# YouTube
YOUTUBE_CLIENT_ID=${YOUTUBE_CLIENT_ID}
YOUTUBE_CLIENT_SECRET=${YOUTUBE_CLIENT_SECRET}

# Instagram
INSTAGRAM_CLIENT_ID=${INSTAGRAM_CLIENT_ID}
INSTAGRAM_CLIENT_SECRET=${INSTAGRAM_CLIENT_SECRET}

# =============================================================================
# 應用程序配置
# =============================================================================
DEBUG=false
LOG_LEVEL=INFO
STRUCTURED_LOGGING=true
PROJECT_NAME=Auto Video Generation System

# CORS 配置 (生產環境請限制域名)
CORS_ORIGINS=["https://your-domain.com","https://app.autovideo.com"]
ALLOWED_HOSTS=["yourdomain.com"]

# 速率限制
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# =============================================================================
# 服務內部通信配置
# =============================================================================
AUTH_SERVICE_URL=http://auth-service:8001
DATA_SERVICE_URL=http://data-service:8002
INFERENCE_SERVICE_URL=http://inference-service:8003
VIDEO_SERVICE_URL=http://video-service:8004
AI_SERVICE_URL=http://ai-service:8005
SOCIAL_SERVICE_URL=http://social-service:8006
TREND_SERVICE_URL=http://trend-service:8007
SCHEDULER_SERVICE_URL=http://scheduler-service:8008

# =============================================================================
# 監控與日誌配置
# =============================================================================
# Grafana 管理密碼
GRAFANA_ADMIN_PASSWORD=${GRAFANA_ADMIN_PASSWORD}

# Sentry 錯誤追蹤
SENTRY_DSN=${SENTRY_DSN}

# Prometheus 監控
PROMETHEUS_ENABLED=true
METRICS_PORT=9090

# Jaeger 分散式追蹤
JAEGER_ENABLED=false
JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# =============================================================================
# 郵件服務配置
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_TLS=true

# =============================================================================
# 檔案上傳限制
# =============================================================================
MAX_UPLOAD_SIZE_MB=100
ALLOWED_FILE_EXTENSIONS=["mp3", "wav", "m4a", "flac"]
TEMP_STORAGE_PATH=/tmp/uploads

# =============================================================================
# Celery 任務隊列配置
# =============================================================================
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2
CELERY_TASK_SOFT_TIME_LIMIT=300
CELERY_TASK_TIME_LIMIT=600

# =============================================================================
# 安全標頭配置
# =============================================================================
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'"

# =============================================================================
# SSL/TLS 配置
# =============================================================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/domain.crt
SSL_KEY_PATH=/etc/ssl/private/domain.key

# =============================================================================
# 備份配置
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # 每日凌晨2點
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=auto-video-backups

# =============================================================================
# MacBook Pro M4 ARM64 優化配置
# =============================================================================
# Docker 建構優化
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1
DOCKER_DEFAULT_PLATFORM=linux/arm64

# Python 性能優化
PYTHONOPTIMIZE=2
OMP_NUM_THREADS=8
MKL_NUM_THREADS=8
OPENBLAS_NUM_THREADS=8

# Node.js 性能優化
NODE_OPTIONS=--max-old-space-size=4096
UV_THREADPOOL_SIZE=8

# FFmpeg 多線程優化
FFMPEG_THREADS=8

# M4 記憶體優化
MAX_MEMORY_USAGE_MB=8192  # 充分利用 M4 記憶體
CACHE_SIZE_MB=2048        # 快取優化